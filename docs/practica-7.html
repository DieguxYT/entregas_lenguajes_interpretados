<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Snake Game</title>
    <style>
      canvas {
        background: #222;
        display: block;
        margin: 30px auto;
        border: 2px solid #09f;
      }
      body {
        text-align: center;
        color: #fff;
        background: #131313;
        font-family: sans-serif;
      }
    </style>
  </head>
  <body>
    <h1>Snake Game</h1>
    <canvas id="game" width="400" height="400"></canvas>
    <p>Puntaje: <span id="score">0</span></p>
    <script>
      // Configuración
      const canvas = document.getElementById("game");
      const ctx = canvas.getContext("2d");
      const grid = 20;
      let score = 0;

      let snake = [{ x: 200, y: 200 }];
      let direction = { x: grid, y: 0 };
      let apple = {
        x: Math.floor(Math.random() * (canvas.width / grid)) * grid,
        y: Math.floor(Math.random() * (canvas.height / grid)) * grid,
      };

      // Control teclado
      document.addEventListener("keydown", function (e) {
        if (e.key === "ArrowUp" && direction.y === 0) {
          direction = { x: 0, y: -grid };
        } else if (e.key === "ArrowDown" && direction.y === 0) {
          direction = { x: 0, y: grid };
        } else if (e.key === "ArrowLeft" && direction.x === 0) {
          direction = { x: -grid, y: 0 };
        } else if (e.key === "ArrowRight" && direction.x === 0) {
          direction = { x: grid, y: 0 };
        }
      });

      function gameLoop() {
        // Mover cabeza
        const head = {
          x: snake[0].x + direction.x,
          y: snake[0].y + direction.y,
        };

        // Colisión con paredes
        if (
          head.x < 0 ||
          head.x >= canvas.width ||
          head.y < 0 ||
          head.y >= canvas.height
        ) {
          resetGame();
          return;
        }

        // Colisión con cuerpo
        for (let part of snake) {
          if (head.x === part.x && head.y === part.y) {
            resetGame();
            return;
          }
        }

        snake.unshift(head);

        // Comer manzana
        if (head.x === apple.x && head.y === apple.y) {
          score++;
          document.getElementById("score").textContent = score;
          apple.x = Math.floor(Math.random() * (canvas.width / grid)) * grid;
          apple.y = Math.floor(Math.random() * (canvas.height / grid)) * grid;
        } else {
          snake.pop();
        }

        // Dibujar fondo
        ctx.fillStyle = "#222";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Dibujar manzana
        ctx.fillStyle = "#f00";
        ctx.fillRect(apple.x, apple.y, grid, grid);

        // Dibujar serpiente
        ctx.fillStyle = "#0fa";
        for (let part of snake) {
          ctx.fillRect(part.x, part.y, grid, grid);
        }

        setTimeout(gameLoop, 100);
      }

      function resetGame() {
        snake = [{ x: 200, y: 200 }];
        direction = { x: grid, y: 0 };
        score = 0;
        document.getElementById("score").textContent = score;
      }

      gameLoop();
    </script>
  </body>
</html>
